<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #info {
            position: absolute;
            top: 10px;
            width: 100%;
            text-align: center;
            z-index: 100;
            display: block;
            background-color: aliceblue;
            color: red;
        }
    </style>
</head>
<body>
    <div id="container">
        <canvas></canvas>
    </div>
    <script type="text/x-glsl" id="vertex">
        varying vec3 vNormal;
        varying vec3 vViewPosition;

        void main() {

            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
            vNormal = normalize( normalMatrix * normal );
            vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
            vViewPosition = -mvPosition.xyz;

        }
    </script>
    <script type="text/x-glsl" id="fragment">
        uniform vec3 uMaterialColor;

        uniform vec3 uDirLightPos;
        uniform vec3 uDirLightColor;

        uniform float uKd;
        uniform float uBorder;

        varying vec3 vNormal;
        varying vec3 vViewPosition;

        void main() {
            // compute direction to light
            vec4 lDirection = viewMatrix * vec4( uDirLightPos, 0.0 );
            vec3 lVector = normalize( lDirection.xyz );

            // diffuse: N * L. Normal must be normalized, since it's interpolated.
            vec3 normal = normalize( vNormal );

            // Student: check the diffuse dot product against uBorder and adjust
            // this diffuse value accordingly.
            float diffuse = max( dot( normal, lVector ), 0.0);
            if ( diffuse > uBorder ) { 
                diffuse = 1.0; 
            } else { 
                diffuse = 0.5; 
            }
            gl_FragColor = vec4( uKd * uMaterialColor * uDirLightColor * diffuse, 1.0 );
        }
	</script>
</body>
</html>